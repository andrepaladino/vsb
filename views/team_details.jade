extends layout

block content

    div.area
        h1 Team | #{team.name}
        div
            .row
                .col-md-3
                    img(src='#{team.image}' alt='image' style='width:300px;height:200px;' class="rounded")
                    form(name='update' method='post' action='/teams/edit/#{team.id}' encType = 'multipart/form-data')
                        .form-group
                            label Name
                            input.form-control(type='text' value='#{team.name}' name='name')
                        .form-group
                            label Description
                            textarea.form-control(maxlength='125' name='description') #{team.description}
                        .form-group
                            label Team Leader
                            input.form-control(type='text' readonly='' value='#{team.leader.username}')
                        .form-group
                            label Created By
                            input.form-control(type='text' readonly='' value='#{team.createdBy.username}')
                        .form-group
                            label Created Date
                            input.form-control(type='text' readonly='' value='#{team.createdDate}')
                        .form-group
                            label Updated By
                            input.form-control(type='text' readonly='' value='#{team.updatedBy.username}')
                        .form-group
                            label Updated Date
                            input.form-control(type='text' readonly='' value='#{team.updatedDate.toLocaleTimeString()}')
                        .form-group 
                            input(type='file' class='form-control-file' name='image')
                        .form-group 
                            input(type='hidden' name='currentImage' value='#{team.image}')
                        input(class='btn btn-success' type='submit' value='Save')

                .col-md-6
                    if(errors)
                            ul.list-group
                                each err in errors
                                    li.list-group-item.text-danger= err
                    div.area
                        h1 Action Items
                        input#myInput.form-control(type='text' placeholder='Search..')
                        lable Status Filter
                        .row
                            .col
                                
                                select.form-control#StatusOptions(name='selectedStatus')
                                    option(value='ALL') All
                                    option(value='NEW') New
                                    option(value='COMPLETED') Completed
                                    option(value='CANCELLED') Cancelled
                            .col
                                a.btn.btn-success#filterStatus(href='#') Filter
                        </br>
                        table.table#actionItems
                            thead
                                tr
                                    th(scope='col') Action Item
                                    th(scope='col') Owner
                                    th(scope='col') Complete
                                    th(scole='col') Cancel
                                    th(scole='col') Status
                            tbody#myTable
                                each i in team.actionitems
                                    tr
                                        th #{i.text}
                                        th #{i.owner.username}
                                        th    
                                            a.btn.btn-info.complete-action(href='#')
                                                span.material-icons(action-id = i._id)
                                                    |   done_outline
                                        th    
                                            a.btn.btn-danger.cancel-action(href='#')
                                                span.material-icons(action-id = i._id)
                                                    |   clear
                                        th #{i.status}
                        h1 Retrospectives
                        form(name='newRetro' method='post' action='/retro/create')
                            .form-group
                                h3 Create New
                                .row
                                    .col.5
                                        select.form-control(name='selectedTemplate')
                                            option(value='0') Select a template
                                            each t in templates.templates
                                                option(value='#{t.number}')=t.name
                                    .col.5
                                        input(type='hidden' name='teamID' value='#{team.id}')
                                        input.form-control(type='text' placeholder='Title' name='retrospective')
                                    .col.2
                                        input(class='btn btn-success' type='submit' value='Create')
                            </br>
                        table.table
                            thead
                                tr
                                    th(scope='col') Title
                                    th(scope='col') Date
                                    th(scope='col') Status
                                    th(scope='col') Join
                            tbody
                                each i in team.retrospectives
                                    tr
                                        th #{i.name}
                                        th.date-util() #{i.createdDate}
                                        th #{i.status}
                                        th
                                            if i.status === 'COMPLETED'
                                                a.btn.btn-info(href='/retro/complete/#{i.id}')
                                                    span.material-icons
                                                        | play_circle_outline
                                            else
                                                a.btn.btn-info(id='join' href='/retro/live/#{i.id}')
                                                    span.material-icons
                                                        | play_circle_outline
                                        //- th    
                                        //-   a.btn.btn-danger.remove-member(href='#' team-id = team.id member-id = i._id)
                                        //-     span.glyphicon.glyphicon-remove\
                .col-md-3
                    div#participants
                    h2 Members
                    div
                        each m in team.members
                            .user(id="#{m._id}")
                                a.avatar.teammember(style='background-image: url(#{m.image});' href='/user/details/#{m._id}')
                                .infosPlayer
                                    span.nick=m.username
                                    a.remove-member(href='#')
                                        span.material-icons(href='#' team-id = team._id member-id = m._id style="color:red")
                                            | delete
                    div.area
                        form(name='addmember' method='post' action='/teams/add/member/#{team.id}')
                            .form-group
                                label Add Team Member
                                input.form-control(type='text' placeholder='member@email.com' name='memberEmail')
                            input(class='btn btn-success' type='submit' value='Add')


